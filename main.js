(()=>{const e=document.querySelector(".search-form"),t=e.querySelector("#search");e.addEventListener("submit",(async function(){try{let e=t.value,n=await f(e);return m=p(n),$(m),m}catch(e){console.log(e)}}));let n=!1,c=0;const o=document.querySelector(".daily"),i=document.querySelector(".hourly"),r=document.querySelector(".carousel");function d(){_(0,k(m)),i.classList.add("selected"),o.classList.remove("selected"),r.classList.remove("hidden")}o.addEventListener("click",(()=>{(function(e){let t=I();for(let n=0;n<3;n++)t.append(T(e[n]))})(function(e){let t=e.forecast.forecastday,n=[];for(let e=0;e<3;e++){let c={};c.name=t[e].date,c.lowF=t[e].day.mintemp_f,c.highF=t[e].day.maxtemp_f,c.lowC=t[e].day.mintemp_c,c.highC=t[e].day.maxtemp_c,c.conditionText=t[e].day.condition.text,c.conditionIcon=t[e].day.condition.icon,n.push(c)}return n}(m)),o.classList.add("selected"),i.classList.remove("selected"),r.classList.add("hidden")})),i.addEventListener("click",(()=>{d()}));const a=document.querySelectorAll(".nav-circle");function l(e,t){t.forEach((e=>{e.classList.remove("selected")})),document.getElementById(e).classList.add("selected")}a.forEach(((e,t)=>{e.addEventListener("click",(()=>{c=t,_(c,k(m)),e.classList.remove("selected"),l(c,a)}))}));const s=document.getElementById("carousel-left"),u=document.getElementById("carousel-right");s.addEventListener("click",(()=>{0===c?c=2:c-=1,l(c,a),_(c,k(m))})),u.addEventListener("click",(()=>{2===c?c=0:c+=1,l(c,a),_(c,k(m))})),document.querySelector("body");let m=async function(){try{let e=await f("San Diego");return m=p(e),$(m),m}catch(e){console.log(e)}}();async function f(e){try{let t=await fetch(`https://api.weatherapi.com/v1/forecast.json?key=812a5522c00940c58f902241232604&q=${e}&days=3`);return await t.json()}catch(e){console.log(e)}}function p(e){let t={};return t.conditionIcon=e.current.condition.icon,t.conditionText=e.current.condition.text,t.feelsLikeC=e.current.feelslike_c,t.feelsLikeF=e.current.feelslike_f,t.humidity=e.current.humidity,t.lastUpdated=e.current.last_updated,t.tempC=e.current.temp_c,t.tempF=e.current.temp_f,t.windKph=e.current.wind_kph,t.windMph=e.current.wind_mph,t.forecast=e.forecast,t.locationName=e.location.name,t}const y=document.querySelector(".location-name"),h=document.querySelector(".current-condition-icon"),C=document.querySelector(".current-condition-text"),x=document.querySelector(".temperature"),L=document.querySelector(".feels-like-temperature"),E=document.querySelector(".last-updated"),v=document.querySelector(".humidity"),q=document.querySelector(".wind"),F=document.querySelector(".temperature-modifier");function S(e){x.textContent=`${e.tempC} C`,L.textContent=`Feels Like ${e.feelsLikeC} C`,q.textContent=`${e.windKph} Kph`,g(e),F.textContent="Change to Imperial",n=!0}function g(e){let t=document.querySelectorAll(".temperature-forecast"),o=k(e);n?t.forEach(((e,t)=>{e.textContent=`${o[c][t].tempF} F`})):t.forEach(((e,t)=>{e.textContent=`${o[c][t].tempC} C`}))}function w(e){x.textContent=`${e.tempF} F`,L.textContent=`Feels Like ${e.feelsLikeF} F`,q.textContent=`${e.windMph} Mph`,g(e),F.textContent="Change to Metric",n=!1}function $(e){y.textContent=e.locationName,h.src=e.conditionIcon,C.textContent=e.conditionText,E.textContent=`Last Updated: ${e.lastUpdated}`,v.textContent=`${e.humidity}%`,n?S(e):w(e),d(),l(0,a)}function k(e){let t=e.forecast.forecastday[0].hour,n=[],c=0;for(let e=0;e<3;e++){let e=[];for(let n=c;n<c+8;n++){let c={};c.time=`${n}:00`,c.conditionIcon=t[n].condition.icon,c.conditionText=t[n].condition.text,c.tempC=t[n].temp_c,c.tempF=t[n].temp_f,e.push(c)}n.push(e),c+=8}return n}function _(e,t){let n=I();for(let c=0;c<8;c++)n.append(M(t[e][c]));return n}function I(){let e=document.querySelector(".forecast-content");return e.textContent="",e}function T(e){let t=document.createElement("div");t.classList.add("name"),t.textContent=e.name;let c=document.createElement("div");c.classList.add("temperature-forecast");let o=document.createElement("div");o.classList.add("temperature-forecast"),n?(c.textContent=`High of ${e.highC} C`,o.textContent=`Low of ${e.lowC} C`):(c.textContent=`High of ${e.highF} F`,o.textContent=`Low of ${e.lowF} F`);let i=document.createElement("img");i.classList.add("icon"),i.src=e.conditionIcon;let r=document.createElement("div");r.classList.add("condition"),r.textContent=e.conditionText;let d=document.createElement("div");return d.classList.add("daily-forecast"),d.append(t,c,o,i,r),d}function M(e){let t=document.createElement("div");t.classList.add("time"),t.textContent=e.time;let c=document.createElement("div");c.classList.add("condition"),c.textContent=e.conditionText;let o=document.createElement("div");o.classList.add("temperature-forecast"),o.textContent=n?`${e.tempC} C`:`${e.tempF} F`;let i=document.createElement("img");i.classList.add("icon"),i.src=e.conditionIcon;let r=document.createElement("div");return r.classList.add("hourly-forecast"),r.append(t,o,i,c),r}F.addEventListener("click",(()=>{!function(e){n?w(e):S(e)}(m)}))})();